[Changelog]
opsi-client-agent (4.2.0.42-1) stable; urgency=low

  * Update opsi-login-blocker to 4.2.0.4
  * Update opsiclientd to 4.2.0.131

-- Jan Schneider <j.schneider@uib.de> Fri, 07 Oct 2022 10:22:00 +0100

opsi-client-agent (4.2.0.41-3) stable; urgency=low

  * Fix syntax

-- Jan Schneider <j.schneider@uib.de> Fri, 23 Sep 2022 15:37:00 +0100

opsi-client-agent (4.2.0.41-2) stable; urgency=low

  * Do not use WMI to fetch Admin SID

-- Jan Schneider <j.schneider@uib.de> Fri, 23 Sep 2022 14:57:00 +0100

opsi-client-agent (4.2.0.41-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.130
  * Using system SID for ACL if local admin not found

-- Jan Schneider <j.schneider@uib.de> Fri, 23 Sep 2022 11:34:00 +0100

opsi-client-agent (4.2.0.40-1) stable; urgency=low

  * Updated opsi-notifier to 4.2.0.10 (block-login-notifier fix)
  * Updated opsiclientd to 4.2.0.129 (clear_product_cache datastructure cleanup)

-- Nils Doerrer <n.doerrer@uib.de> Tue, 30 Aug 2022 17:00:00 +0100

opsi-client-agent (4.2.0.39-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.128 (fixed colliding startup event handling, fixed handling of opsiclientd.depot_server.url)

-- Nils Doerrer <n.doerrer@uib.de> Mon, 15 Aug 2022 12:00:00 +0100

opsi-client-agent (4.2.0.38-1) stable; urgency=low

  * Updated oca-installation-helper to 4.2.0.22
  * Updated opsiclientd to 4.2.0.126 (dualstack connection to controlserver, fixed warnings)

-- Nils Doerrer <n.doerrer@uib.de> Tue, 02 Aug 2022 17:00:00 +0100

opsi-client-agent (4.2.0.37-2) stable; urgency=low

  * Fixed setup opsiscript for netboot-context
  * Updated opsiclientd to 4.2.0.125 (no relevant changes)

-- Nils Doerrer <n.doerrer@uib.de> Wed, 19 Jul 2022 09:00:00 +0100

opsi-client-agent (4.2.0.37-1) stable; urgency=low

  * Updated opsi-deploy-client-agent to 4.2.0.22 (removed deprecated options, implementation working without winexe)
  * Updated oca-installation-helper to 4.2.0.21
  * Improved cleanup from very old opsi-client-agent remains
  * Updated opsiclientd to 4.2.0.124 (using alternatives for deprecated methods)
  * Updated opsi-script to 4.12.5.5

-- Nils Doerrer <n.doerrer@uib.de> Wed, 13 Jul 2022 11:00:00 +0100

opsi-client-agent (4.2.0.36-1) stable; urgency=low

  * Updated opsi-login-blocker to 4.2.0.3 (fix login crash)
  * Updated opsiclientd to 4.2.0.122 (fix timer events)

-- Jan Schneider <j.schneider@uib.de> Wed, 29 Jun 2022 15:30:00 +0100

opsi-client-agent (4.2.0.35-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.121 (killing stuck notifiers, longer opsisetupuser password)
  * Updated opsi-notifier to 4.2.0.7 (fixed timepicker selection dialog)

-- Nils Doerrer <n.doerrer@uib.de> Thu, 23 Jun 2022 09:00:00 +0100

opsi-client-agent (4.2.0.34-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.120
  * Fetching custom files from opsi-client-agent-custom
  * Updated opsi-script to 4.12.5.3
  * Updated oca-installation-helper to 4.2.0.20 (fix --no-gui)

-- Jan Schneider <j.schneider@uib.de> Thu, 9 Jun 2022 15:38:00 +0100

opsi-client-agent (4.2.0.33-1) stable; urgency=low

  * Updated openssl to 1.1.1n
  * Updated opsi-script to 4.12.5.0 (fixed isProcessChildOf function)
  * Updated opsiclientd to 4.2.0.119 (updated dependencies, changed logging behaviour)
  * Updated opsi-deploy-client-agent to 4.2.0.21 (fixed winexe test and cleanup on windows)
  * Increased volatility of opsiclientd setup call during installation
  * Updated oca-installation-helper to 4.2.0.19 (getting params from registry for windows)

-- Nils Doerrer <n.doerrer@uib.de> Fri, 6 May 2022 13:00:00 +0100

opsi-client-agent (4.2.0.32-4) stable; urgency=low

  * Updated opsiclientd to 4.2.0.119

-- Jan Schneider <j.schneider@uib.de> Mon, 16 May 2022 12:14:00 +0100

opsi-client-agent (4.2.0.32-3) stable; urgency=low

  * Installing WebDAV-Redirector for windows server systems.

-- Nils Doerrer <n.doerrer@uib.de> Tue, 28 Apr 2022 14:00:00 +0100

opsi-client-agent (4.2.0.32-2) stable; urgency=low

  * Fixed handling of opsiclientdguard in case of installing over 4.1.x opsi-client-agent

-- Nils Doerrer <n.doerrer@uib.de> Tue, 27 Apr 2022 12:00:00 +0100

opsi-client-agent (4.2.0.32-1) stable; urgency=low

  * Add api-ms-win-core-path-l1-1-0.dll
  * Updated opsiclientd to 4.2.0.118

-- Jan Schneider <j.schneider@uib.de> Tue, 26 Apr 2022 18:48:00 +0100

opsi-client-agent (4.2.0.31-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.117 (fix win7 compatibility)
  * Updated oca-installation-helper to 4.2.0.18 (view logfiles on failure)
  * Updated opsi-deploy-client-agent to 4.2.0.20 (updated python dependencies)

-- Nils Doerrer <n.doerrer@uib.de> Mon, 12 Apr 2022 16:15:00 +0100

opsi-client-agent (4.2.0.30-1) stable; urgency=low

  * Updated opsi-notifier to 4.2.0.6
  * Improved error handling in case of unreachable configserver
  * Updated opsiclientd to 4.2.0.116

-- Jan Schneider <j.schneider@uib.de> Fri, 01 Apr 2022 16:17:00 +0100

opsi-client-agent (4.2.0.29-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.113
  * Updated opsi-notifier to 4.2.0.5

-- Jan Schneider <j.schneider@uib.de> Tue, 29 Mar 2022 11:07:00 +0100

opsi-client-agent (4.2.0.28-1) stable; urgency=low

  * Updated oca-installation-helper to 4.2.0.17 (new option --no-set-mac-address, fixed evaluation of files/custom/install.conf)
  * Changed installation to finalize reboot in case of systray installation
  * Changed uninstallation to not reboot as final action

-- Nils Doerrer <n.doerrer@uib.de> Tue, 22 Mar 2022 10:50:00 +0100

opsi-client-agent (4.2.0.27-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.112 (cleanup registry uninstall, fix shutdown warning repetition after standby)

-- Jan Schneider <j.schneider@uib.de> Mon, 21 Mar 2022 15:50:00 +0100

opsi-client-agent (4.2.0.26-1) stable; urgency=low

  * Fixed version registry setting
  * Updated opsiclientd to 4.2.0.111 (collectLogfiles feature, fixed multithreaded certificate access)
  * Updated opsi-deploy-client-agent to 4.2.0.19 (improved logging, reporting failure reasons --failed-clients-file)

-- Nils Doerrer <n.doerrer@uib.de> Wed, 16 Mar 2022 10:00:00 +0100

opsi-client-agent (4.2.0.25-1) stable; urgency=low

  * Added version file opsi-client-agent.version for conditioned installation
  * Fixed postinst for first time installation
  * Updated oca-installation-helper to 4.2.0.16 (new parameter --install-condition)

-- Nils Doerrer <n.doerrer@uib.de> Thu, 24 Feb 2022 16:00:00 +0100

opsi-client-agent (4.2.0.24-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.110 (fixed jsonrpc logging)

-- Nils Doerrer <n.doerrer@uib.de> Thu, 24 Feb 2022 16:00:00 +0100

opsi-client-agent (4.2.0.23-1) stable; urgency=low

  * Updated oca-installation-helper to 4.2.0.15 (new parameters --dns-domain, --finalize, --read-conf-files)
  * Updated opsi-deploy-client-agent 4.2.0.18 (suse fix for smbclient call)
  * Updated opsiclientd to 4.2.0.109 (reworked opsi-setup-user cleanup and service connection timeouts)
  * Removed Kiosk Migration. Do not install this package over opsi-client-agent < 4.1.1.18 (serverside) if using kiosk!

-- Nils Doerrer <n.doerrer@uib.de> Tue, 08 Feb 2022 11:00:00 +0100

opsi-client-agent (4.2.0.22-1) stable; urgency=low

  * Updated opsi-login-blocker to 4.2.0.2
  * Updated opsiclientd to 4.2.0.107 (improved logging output, possibility to skip firewall setup, updated packages)
  * Updated oca-installation-helper to 4.2.0.13 (fix for macos, new parameter --force-recreate-client)
  * Avoid duplicate permission setting if not neccessary.

-- Nils Doerrer <n.doerrer@uib.de> Tue, 08 Feb 2022 11:00:00 +0100

opsi-client-agent (4.2.0.21-2) stable; urgency=low

  * exit with error if permissions cant be set.

-- Nils Doerrer <n.doerrer@uib.de> Fri, 04 Feb 2022 09:00:00 +0100

opsi-client-agent (4.2.0.21-1) stable; urgency=low

  * Updated opsiclientd to 4.2.0.105
  * Updated opsi-deploy-client-agent to 4.2.0.17 (set timeouts, added parameter --install-timeout)
  * Updated oca-installation-helper to 4.2.0.12
  * On reinstallation via netboot, keep pending actionRequests (like always)

-- Nils Doerrer <n.doerrer@uib.de> Thu, 03 Feb 2022 15:00:00 +0100

opsi-client-agent (4.2.0.20-2) stable; urgency=low

  * stop installation if previous opsiclientd is < 4.2.0.77 and operating in WAN mode

-- Nils Doerrer <n.doerrer@uib.de> Wed, 02 Jan 2022 17:00:00 +0100

opsi-client-agent (4.2.0.20-1) stable; urgency=low

  * Dependency to opsi-script >= 4.12.4.35
  * Improved uninstallation script
  * Updated oca-installation-helper to 4.2.0.11 (powershell allsigned change, adapted proxy handling)
  * Improved installation in wim-capture-kontext (not setting installed packages to setup)
  * Connectivity check during setup
  * Updated opsiclientd to 4.2.0.104

-- Nils Doerrer <n.doerrer@uib.de> Thu, 06 Jan 2022 16:30:00 +0100

opsi-client-agent (4.2.0.19-2) stable; urgency=low

  * Reverted powershell fix
  * Updated opsiclientd to 4.2.0.103

-- Nils Doerrer <n.doerrer@uib.de> Wed, 22 Dec 2021 13:00:00 +0100

opsi-client-agent (4.2.0.19-1) stable; urgency=low

  * Update opsi-login-blocker to 4.2.0.1
  * Update opsiclientd to 4.2.0.102 (event handling fix)
  * Update oca-installation-helper to 4.2.0.9 (windows 7 tempdir fix)
  * Allsigned compatible powershell calls
  * Fixed allow_reboot in case of very old previous opsi-client-agent version

-- Jan Schneider <j.schneider@uib.de> Tue, 21 Dec 2021 14:30:00 +0100

opsi-client-agent (4.2.0.18-2) stable; urgency=low

  * Update oca-installation-helper to 4.2.0.8 (minor logging fix)

-- Nils Doerrer <n.doerrer@uib.de> Mon, 16 Dec 2021 12:00:00 +0100

opsi-client-agent (4.2.0.18-1) stable; urgency=low

  * Rotate instlog during os installation
  * Update opsiclientd to 4.2.0.100 (event handling fix)
  * Update oca-installation-helper to 4.2.0.7 (proxy handling fix)
  * Fixed uninstall (Registry access by sysnative)
  * Update opsi-script to 4.12.4.33 (FileVersionInfo fix)

-- Jan Schneider <j.schneider@uib.de> Mon, 15 Dec 2021 11:24:00 +0100

opsi-client-agent (4.2.0.17-1) stable; urgency=low

  * Fix: old opsiclientd version does not handle restart marker
  * Updated opsiclientd to 4.2.0.99 (WAN mode - fix modules handling)

-- Jan Schneider <j.schneider@uib.de> Mon, 06 Dec 2021 15:45:00 +0100

opsi-client-agent (4.2.0.16-1) stable; urgency=low

  * Improved checking for Powershell restrictions
  * Update opsi-notifier to 4.2.0.3 (timepicker fix)
  * Update opsiclientd to 4.2.0.98
    - feature: temporary popup notifications
    - fix: event config inheritance
    - fix: only save current custom skin if it is nonempty
    - fix: update choices in time select notifier while running
  * Workaround for access denied on rename of bin folder
  * Installing opsi-script if not present (ahead of update_action_processor)
  * Updated oca-installation-helper to 4.2.0.6
  * Add parameter /u to service_setup.cmd

-- Nils Doerrer <n.doerrer@uib.de> Tue, 01 Dec 2021 13:30:00 +0100

opsi-client-agent (4.2.0.15-1) stable; urgency=low

  * Update vcredist to 2015-2022 14.30.30528.0
  * Update opsiclientd to 4.2.0.96 (reworked event-handling, minor fixes)
  * Update oca-installation-helper to 4.2.0.5
  * Update opsi-script to 4.12.4.31
  * Update opsi-deploy-client-agent to 4.2.0.15 (isolated from opsicommon python module)

-- Nils Doerrer <n.doerrer@uib.de> Thu, 18 Nov 2021 17:30:00 +0100

opsi-client-agent (4.2.0.14-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.94
  * Update opsi-notifier to 4.2.0.2

-- Nils Doerrer <n.doerrer@uib.de> Mon, 25 Oct 2021 16:30:00 +0100

opsi-client-agent (4.2.0.13-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.93
  * Migrate product property on_shutdown_install

-- Jan Schneider <j.schneider@uib.de> Fri, 08 Oct 2021 07:44:00 +0100

opsi-client-agent (4.2.0.12-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.92

-- Nils Doerrer <n.doerrer@uib.de> Wed, 22 Sep 2021 15:51:00 +0100

opsi-client-agent (4.2.0.11-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.91

-- Jan Schneider <j.schneider@uib.de> Wed, 22 Sep 2021 08:51:00 +0100

opsi-client-agent (4.2.0.10-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.90

-- Jan Schneider <j.schneider@uib.de> Tue, 21 Sep 2021 07:15:00 +0100

opsi-client-agent (4.2.0.9-1) stable; urgency=low

  * Fixed cleanup of very old notifier
  * Fixed setup setting for netbootproducts run on clean machines
  * Updated opsiclientd to 4.2.0.89
  * Updated oca-installation-helper to 4.2.0.4

-- Nils Doerrer <n.doerrer@uib.de> Thu, 17 Sep 2021 13:00:00 +0100

opsi-client-agent (4.2.0.8-1) stable; urgency=low

  * Fix process_wim_capture()

-- Jan Schneider <j.schneider@uib.de> Wed, 08 Sep 2021 16:10:00 +0100

opsi-client-agent (4.2.0.7-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.88
  * Update oca-installation-helper to 4.2.0.2

-- Jan Schneider <j.schneider@uib.de> Mon, 30 Aug 2021 11:00:00 +0100

opsi-client-agent (4.2.0.6-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.87
  * Update oca-installation-helper to 4.2.0.1
  * Fixed installation finalization. No reboot in bootimage context.

-- Jan Schneider <j.schneider@uib.de> Thu, 24 Aug 2021 08:30:00 +0100

opsi-client-agent (4.2.0.5-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.86

-- Jan Schneider <j.schneider@uib.de> Thu, 19 Aug 2021 15:36:00 +0100

opsi-client-agent (4.2.0.4-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.85

-- Jan Schneider <j.schneider@uib.de> Wed, 18 Aug 2021 13:20:00 +0100

opsi-client-agent (4.2.0.3-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.84
  * Fix ExecWith_powershell_running_in_service_context
  * Fix reboot for package actions
  * Always copy all custom files

-- Jan Schneider <j.schneider@uib.de> Tue, 17 Aug 2021 14:31:00 +0100

opsi-client-agent (4.2.0.2-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.83

-- Jan Schneider <j.schneider@uib.de> Wed, 11 Aug 2021 12:46:00 +0100

opsi-client-agent (4.2.0.1-1) stable; urgency=low

  * Update opsiclientd to 4.2.0.82
  * Reboot after installation if other packages are set to setup
  * Move custom winstskin to new location

-- Jan Schneider <j.schneider@uib.de> Mon, 21 Jun 2021 14:46:00 +0100

opsi-client-agent (4.2.0.0-1) stable; urgency=low

  * opsi-client-agent 4.2 release

-- Jan Schneider <j.schneider@uib.de> Mon, 21 Jun 2021 14:46:00 +0100
